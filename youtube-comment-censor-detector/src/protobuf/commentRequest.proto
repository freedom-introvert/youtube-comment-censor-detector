syntax = "proto3";

// YouTubeçš„ä¸¤ä¸ªè·å–è¯„è®ºçš„APIæ¥å£ï¼Œcontinuation base64 çš„é€†å‘
// å­—æ®µåç§°æ˜¯æ ¹æ®å¸¸è§ protobuf ç”¨æ³•å’Œæä¾›çš„æ•°æ®çŒœæµ‹çš„ã€‚
// ç‰¹åˆ«æ„Ÿè°¢ï¼šhttps://protobuf-decoder.netlify.app/

//è¯·æ±‚API https://www.youtube.com/youtubei/v1/next?prettyPrint=false
message NextContinuation {
  // å­—æ®µ 2 çœ‹èµ·æ¥æ˜¯è§†é¢‘ ID çš„ä¸€ä¸ªåŒ…è£…å™¨ã€‚
  // å®ƒå¯èƒ½æ˜¯ä¸€ä¸ªåµŒå¥—æ¶ˆæ¯ï¼Œæˆ–è€…ä¸€ä¸ª mapï¼Œä½†åµŒå¥—æ¶ˆæ¯åœ¨ç»“æ„åŒ–æ•°æ®ä¸­æ›´å¸¸è§ã€‚
  CommentAreaWrapper commentAreaWrapper = 2;

  // æœªçŸ¥å­—æ®µ3ï¼Œå¿…é¡»ï¼Œèµ‹å€¼ï¼š6
  int32 uField3 = 3;

  // å­—æ®µ 6 è·å–è¯„è®ºåˆ—è¡¨ä¸»è¦çš„è¯·æ±‚ä½“
  MainCommentRequest mainCommentRequest = 6;
}

message CommentAreaWrapper {
  // è¿™ä¸ªåŒ…è£…å™¨ä¸­çš„å­—æ®µ 2 æ˜¾ç„¶åŒ…å«è§†é¢‘ IDã€‚
  string videoId = 2; // "iBNQdQJQXcw"
}

message MainCommentRequest {
  // å­—æ®µ 4 ä¸€çº§è¯„è®ºåŒºçš„è¯·æ±‚å‚æ•°
  CommentParameters commentParameters = 4;
  // å­—æ®µ 3 äºŒçº§è¯„è®ºåŒºï¼ˆè¯„è®ºå›å¤çš„æ¥¼ä¸­æ¥¼ï¼‰çš„è¯·æ±‚å‚æ•° 
  CommentReplyParameters commentReplyParameters = 3;
  // å­—æ®µ 8 èµ‹å€¼ï¼š"comments-section" å¦‚æœæ˜¯äºŒçº§è¯„è®ºåŒºï¼Œåˆ™èµ‹å€¼ `comment-replies-item-${æ ¹è¯„è®ºID}`
  //å…¶å®å®ƒå«åº”è¯¥targetIdï¼Œåœ¨è¿™å‘ç°å®ƒè¢«è¿™ä¹ˆå« onResponseReceivedEndpoints[0].appendContinuationItemsAction.targetId
  string sectionIdentifier = 8;
}

message CommentParameters {
  // è¿™é‡Œçš„å­—æ®µ 4 ä¹ŸåŒ…å«è§†é¢‘ IDï¼Œè¡¨æ˜é‡å¤ä½¿ç”¨æˆ–åœ¨ä¸åŒä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ã€‚
  string videoId = 4;

  // å­—æ®µ29ï¼Œå¸–å­ID
  string postId = 29;
  // å­—æ®µ30ï¼Œå¸–å­æ‰€å±çš„é¢‘é“ID
  string channelId = 30;

  // å­—æ®µ6ï¼Œæ’åºæ–¹å¼ï¼Œæœ€çƒ­é—¨ or æœ€æ–°
  SortType sortType = 6;

  // å­—æ®µ 16 æ˜¯ä½ è¦æŸ¥çœ‹çš„è¯„è®º IDã€‚æ˜¯æ¥¼ä¸­æ¥¼çš„äºŒçº§è¯„è®ºä¹Ÿæ— å¦¨
  string targetCommentId = 16;

  enum SortType {
    HOT = 0;
    LATEST = 1;
  }
}


message CommentReplyParameters{
  // å­—æ®µ 2 æ ¹è¯„è®ºçš„è¯„è®ºID
  string rootCommentId = 2;

  // å­—æ®µ 5 å½“å‰è¯„è®ºåŒºé¢‘é“ä¸»çš„é¢‘é“IDï¼ˆä¸æ˜¯æ ¹è¯„è®ºå‘é€è€…çš„é¢‘é“IDï¼‰,è§†é¢‘å’Œå¸–å­éƒ½éœ€è¦åŠ ä¸Šæ­¤å‚æ•°
  string channelId = 5;

  // å­—æ®µ 6 è§†é¢‘ID
  string videoId = 6;

  // å­—æ®µ 15 å¸–å­ID
  string postId = 15;

  // å­—æ®µ 9 æ¯é¡µå¤§å° 
  int32 pageSize = 9;

  // å­—æ®µ 16 æ’åºå‚æ•°ï¼Œå¦ˆçš„æœ‰ç—…ï¼Œä¸ç»Ÿä¸€å°±ç®—äº†ï¼Œè¿˜å¥—MessageğŸ˜…
  SortParam sortParam = 16;

  message SortParam {
    SortType sortType = 1;

    enum SortType {
      DEFAULT = 0;
      HOT = 1;
      LATEST = 2;
    }
  }
}


//è¯·æ±‚API https://www.youtube.com/youtubei/v1/browse?prettyPrint=false
message BrowserContinuation {
  Request request = 80226972;

  message Request {
    //å­—æ®µ2ï¼Œæè¿°ï¼Ÿèµ‹å€¼ï¼š"FEcomment_post_detail_page_web_top_level" æˆ– "FEcomment_post_detail_page_web_replies_page" ï¼ˆæ¥¼ä¸­æ¥¼ï¼‰
    string description = 2;
    //å­—æ®µ3ï¼Œç±»ä¼¼continuationï¼Œä½†æ˜¯è¿™ä¸ªåˆä»–å¦ˆçš„å¥—äº†ä¸€å±‚
    string continuationBase64 = 3;
  }
}

//å¸–å­çš„è¯„è®ºåˆ—è¡¨è¯·æ±‚
message BrowserCommentListContinuation {
  //å­—æ®µ2ï¼Œæè¿°ï¼Ÿèµ‹å€¼ï¼š"community"
  string description = 2;
  //å­—æ®µ53ï¼Œè·å–è¯„è®ºåˆ—è¡¨ä¸»è¦çš„è¯·æ±‚ä½“
  MainCommentRequest mainCommentRequest = 53;
}

